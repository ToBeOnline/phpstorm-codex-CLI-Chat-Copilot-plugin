<idea-plugin>
  <id>com.codex.phpstorm</id>
  <name>Codex CLI/Chat/Copilot</name>
  <vendor email="support@codex.example" url="https://codex.codes">Codex</vendor>

  <description><![CDATA[
Codex CLI/Chat/Copilot integration for PhpStorm. Provides Codex CLI access, chat, and inline Copilot-style completions with context-aware prompts and settings for your Codex backend.
  ]]></description>

  <depends>com.intellij.modules.platform</depends>
  <depends>com.jetbrains.php</depends>
  <depends>org.jetbrains.plugins.terminal</depends>

  <extensions defaultExtensionNs="com.intellij">
    <notificationGroup id="Codex" displayType="BALLOON" isLogByDefault="true"/>
    <postStartupActivity implementation="com.codex.phpstorm.startup.CodexStartupActivity"/>
    <inline.completion.provider implementation="com.codex.phpstorm.inline.CodexInlineCompletionProvider" order="first"/>
    <applicationConfigurable instance="com.codex.phpstorm.settings.CodexSettingsConfigurable"
                              displayName="Codex"
                              id="com.codex.phpstorm.settings.CodexSettingsConfigurable"/>
    <toolWindow id="Codex Chat"
                anchor="right"
                factoryClass="com.codex.phpstorm.toolwindow.CodexToolWindowFactory"
                icon="/icons/codex.svg"
                stripeTitle="Codex Chat"/>
    <toolWindow id="Codex CLI"
                anchor="bottom"
                factoryClass="com.codex.phpstorm.toolwindow.CodexCliToolWindowFactory"
                icon="/icons/codex.svg"
                stripeTitle="Codex CLI"/>
  </extensions>

  <actions>
    <action id="com.codex.phpstorm.actions.OpenCodexChatToolWindowAction"
            class="com.codex.phpstorm.actions.OpenCodexChatToolWindowAction"
            text="Open Codex Chat"
            description="Open the Codex Chat tool window">
      <add-to-group group-id="ToolsMenu" anchor="last"/>
    </action>
    <action id="com.codex.phpstorm.actions.OpenCodexCliToolWindowAction"
            class="com.codex.phpstorm.actions.OpenCodexCliToolWindowAction"
            text="Open Codex CLI"
            description="Open the Codex CLI tool window">
      <add-to-group group-id="ToolsMenu" anchor="last"/>
    </action>
    <action id="com.codex.phpstorm.actions.SendSelectionToCodexAction"
            class="com.codex.phpstorm.actions.SendSelectionToCodexAction"
            text="Ask Codex About Selection"
            description="Send the selected code to Codex Chat">
      <add-to-group group-id="EditorPopupMenu" anchor="last"/>
    </action>
    <action id="com.codex.phpstorm.actions.CodexTriggerInlineCompletionAction"
            class="com.codex.phpstorm.actions.CodexTriggerInlineCompletionAction"
            text="Codex: Trigger Inline Completion"
            description="Trigger Codex inline completion (ghost text)">
      <add-to-group group-id="ToolsMenu" anchor="last"/>
    </action>
    <action id="com.codex.phpstorm.actions.CodexInlineCompletionDiagnosticsAction"
            class="com.codex.phpstorm.actions.CodexInlineCompletionDiagnosticsAction"
            text="Codex: Inline Completion Diagnostics"
            description="Show inline completion diagnostics for Codex">
      <add-to-group group-id="ToolsMenu" anchor="last"/>
    </action>
  </actions>
</idea-plugin>
